# --- Database (PostgreSQL on Railway) ---
# Uses a single JDBC-style DATABASE_URL, for example:
# jdbc:postgresql://host:port/database?sslmode=require
datasources:
  postgres:
    url: ${DATABASE_URL}
    driverClassName: org.postgresql.Driver

# --- Kestra core + AI Copilot ---
kestra:
  ai:
    type: gemini
    gemini:
      api-key: ${GEMINI_API_KEY}
      model-name: ${GEMINI_MODEL:`gemini-2.5-flash`}

  queue:
    type: postgres
  repository:
    type: postgres

  storage:
    type: local
    local:
      basePath: /app/storage

  tasks:
    tmpDir:
      path: /tmp/kestra-wd/tmp

  url: ${PUBLIC_URL:`http://localhost:8080/`}

  server:
    basicAuth:
      username: ${KESTRA_USERNAME:`[emailÂ protected]`}
      password: ${KESTRA_PASSWORD:`change-me-please`}

# --- Health/metrics ---
endpoints:
  all:
    port: 8081
